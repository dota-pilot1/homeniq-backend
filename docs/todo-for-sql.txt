# Super-HomeniQ 개발 로드맵 (SQL 연습 포함)

## Phase 1: 기본 인증 및 사용자 관리 (완료)
✅ 1. users 테이블 생성 및 회원가입/로그인 API 구현
✅ 2. BCrypt 암호화 적용
✅ 3. MyBatis 기본 CRUD 연습

## Phase 2: IoT 디바이스 관리
□ 4. devices 테이블 생성 (디바이스 종류: 조명, 에어컨, 난방, 환기 등)
   - id, user_id, device_type, device_name, status(on/off), location, created_at
   - 1:N 관계 (한 사용자가 여러 디바이스 소유)

□ 5. 디바이스 등록/조회/수정/삭제 API 구현
   - JOIN 쿼리: user와 device 조인하여 사용자별 디바이스 목록 조회

□ 6. device_control_logs 테이블 생성 (디바이스 제어 이력)
   - id, device_id, action(on/off/set_temperature), value, controlled_at
   - 시간대별 디바이스 사용 통계 (GROUP BY, DATE_FORMAT)

## Phase 3: 커뮤니티 시설 예약
□ 7. community_facilities 테이블 생성 (골프존, 독서실, 피트니스 등)
   - id, facility_type, name, capacity, operating_hours, status

□ 8. reservations 테이블 생성 (예약 정보)
   - id, user_id, facility_id, reservation_date, start_time, end_time, status
   - 복합키 인덱스: (facility_id, reservation_date, start_time)

□ 9. 예약 가능 시간 조회 API
   - 서브쿼리: 이미 예약된 시간대 제외
   - BETWEEN, NOT IN 쿼리 활용

□ 10. 예약 생성/취소 API + 동시성 처리
    - 트랜잭션: 중복 예약 방지 (FOR UPDATE)
    - 낙관적 락/비관적 락 학습

## Phase 4: 딜리픽미 (주문/배송)
□ 11. products 테이블 생성
    - id, name, category, price, stock, description, image_url

□ 12. orders 테이블 생성
    - id, user_id, total_amount, order_status, delivery_location, ordered_at
    - 주문 상태: PENDING, PREPARING, DELIVERING, DELIVERED

□ 13. order_items 테이블 생성
    - id, order_id, product_id, quantity, price
    - M:N 관계 해소 테이블 (Order - Product)

□ 14. 장바구니 기능
    - cart_items 테이블: user_id, product_id, quantity, added_at
    - 집계 함수: SUM으로 장바구니 총액 계산

## Phase 5: 통계 및 대시보드
□ 15. 사용자별 IoT 디바이스 사용 통계 API
    - GROUP BY, COUNT, AVG 활용
    - 시간대별/디바이스별 사용량 분석

□ 16. 월별 커뮤니티 시설 예약 현황
    - DATE_FORMAT, GROUP BY로 월별 집계
    - 인기 시설 TOP 5 조회 (ORDER BY, LIMIT)

□ 17. 배송 상태별 주문 현황 대시보드
    - CASE WHEN 활용한 조건부 집계
    - 피벗 테이블 쿼리

## Phase 6: 고급 기능
□ 18. 전문 검색 구현
    - products 테이블에 FULLTEXT INDEX 추가
    - MATCH AGAINST 쿼리로 상품 검색

□ 19. 페이징 및 정렬 최적화
    - LIMIT, OFFSET 활용
    - 커버링 인덱스로 성능 개선

□ 20. 복합 쿼리 통합 API
    - 사용자 대시보드: 디바이스 현황 + 예약 일정 + 최근 주문
    - WITH(CTE), 서브쿼리, 다중 JOIN 종합 활용

---

## SQL 학습 포인트
- 기본: INSERT, SELECT, UPDATE, DELETE
- 조인: INNER JOIN, LEFT JOIN (1:N, M:N)
- 집계: GROUP BY, COUNT, SUM, AVG, MAX, MIN
- 서브쿼리: WHERE절, FROM절 서브쿼리
- 트랜잭션: ACID, 격리 수준, 락
- 인덱스: PRIMARY KEY, UNIQUE, INDEX, FULLTEXT
- 최적화: EXPLAIN으로 실행 계획 분석

---

## ERD 구조
users (1) --- (N) devices --- (N) device_control_logs
  |
  +--- (N) reservations --- (N) community_facilities
  |
  +--- (N) orders --- (N) order_items --- (N) products
       |
       +--- (N) cart_items --- (N) products
